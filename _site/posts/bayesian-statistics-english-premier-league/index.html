<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tony ElHabr">
<meta name="dcterms.date" content="2019-12-13">
<meta name="description" content="With a Bayesian Approach">

<title>Tony’s Blog - Ranking English Premier League Teams</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/img/keyboard.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-79842648-2', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Tony’s Blog - Ranking English Premier League Teams">
<meta name="twitter:description" content="With a Bayesian Approach">
<meta name="twitter:image" content="https://itsmetoeknee.netlify.app/posts\bayesian-statistics-english-premier-league\viz_summ_1_z_adj.png">
<meta name="twitter:site" content="@TonyElHabr">
<meta name="twitter:image-height" content="1500">
<meta name="twitter:image-width" content="2100">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Tony’s Blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html">
 <span class="menu-text">Projects</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/tonyelhabr"><i class="bi bi-github" role="img" aria-label="github">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/TonyElHabr"><i class="bi bi-twitter" role="img" aria-label="twitter">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul>
  <li><a href="#data-collection" id="toc-data-collection" class="nav-link" data-scroll-target="#data-collection">Data Collection</a></li>
  </ul></li>
  <li><a href="#modeling" id="toc-modeling" class="nav-link" data-scroll-target="#modeling">Modeling</a></li>
  <li><a href="#interpretation-discussion" id="toc-interpretation-discussion" class="nav-link" data-scroll-target="#interpretation-discussion">Interpretation &amp; Discussion</a>
  <ul>
  <li><a href="#predictions" id="toc-predictions" class="nav-link" data-scroll-target="#predictions">Predictions</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a>
  <ul>
  <li><a href="#future-work" id="toc-future-work" class="nav-link" data-scroll-target="#future-work">Future Work</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Ranking English Premier League Teams</h1>
  <div class="quarto-categories">
    <div class="quarto-category">r</div>
    <div class="quarto-category">soccer</div>
  </div>
  </div>

<div>
  <div class="description">
    With a Bayesian Approach
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Tony ElHabr </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 13, 2019</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>I haven’t had as much time (since summer of 2018) to write due to taking classes in pursuit of a degree from <a href="https://pe.gatech.edu/degrees/analytics">Georgia Tech’s Online Master of Science in Analytics (OMSA)</a> program. On the other hand, the classes have given me some ideas for future content. And, in the case of the <a href="https://en.wikipedia.org/wiki/Bayesian_statistics">Bayesian Statistics</a> class that I took this past fall, there’s content that translates well to a blog post directly. What follows is a lightly edited version of the report that I submitted at the end of the semester for this class.</p>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>I model and predict <a href="https://en.wikipedia.org/wiki/Premier_League">English Premier League</a> (EPL) game outcomes using Bayesian methods. Specifically, I estimated goals scored by each team in a given game as independent Poisson processes, taking the difference of the estimated points scored on each side to determine game winners. More broadly, one may call this a hierarchical Bayesian Poisson model.</p>
<p>Why model goals scored using a Poisson distribution? <a href="https://en.wikipedia.org/wiki/Poisson_distribution">By definition</a>, it “is a discrete probability distribution that expresses the probability of a given number of events occurring in a fixed interval of time with a known constant rate.” In the context of soccer, the fixed interval of time is the 90 minutes of a game (disregarding injury time and over time), and the known constant rate is the expected number of goals scored per minute. Importantly, I must make the assumption that the rate of scored goals is the same across all minutes of a game. <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> Additionally, when computing the difference between Poisson distributions, I must assume that the two distributions are independent of one another. <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p>Using Poisson distributions to model soccer scores is certainly not a novel concept. <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> <a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> In particular, I would like to acknowledge <a href="http://www.sumsar.net/blog/2013/07/modeling-match-results-in-la-liga-part-one/">the work of Rasmus Baath’s</a>, whose series of blog posts exemplifying the use of R and <a href="http://mcmc-jags.sourceforge.net/">JAGS</a> to model scores in <a href="https://en.wikipedia.org/wiki/La_Liga"><em>La Liga</em></a> games between the 2008-09 to 2012-13 season served as a guide for the analysis that I conduct here. <a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> <a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<section id="data-collection" class="level2">
<h2 class="anchored" data-anchor-id="data-collection">Data Collection</h2>
<p>For this project I retrieved game scores and outcomes for the previous three seasons of EPL games (i.e.&nbsp;from the 2016-17 season through the 2018-2019 season).</p>
</section>
</section>
<section id="modeling" class="level1">
<h1>Modeling</h1>
<p>My model is formally defined as follows.</p>
<p><span class="math display">\[
\begin{array}{c}
g_h \sim \mathcal{Pois}(\lambda_{h,i,j}) \\
g_a \sim \mathcal{Pois}(\lambda_{a,i,j}) \\
\log(\lambda_{h,i,j}) = \text{baseline}_h + (z_i - z_j) \\
\log(\lambda_{a,i,j}) = \text{baseline}_a + (z_j - z_i). \\
\end{array}
\]</span></p>
<p>This model estimates the goals scored by the home team, <span class="math inline">\(g_h\)</span>, and the goals scored by the away team, <span class="math inline">\(g_a\)</span>, in a given game between home team, <span class="math inline">\(\text{tm}_h\)</span>, and away team, <span class="math inline">\(\text{tm}_a\)</span>, as random variables coming from independent Poisson processes, <span class="math inline">\(\mathcal{Pois}(\lambda_{h,i,j})\)</span> and <span class="math inline">\(\mathcal{Pois}(\lambda_{a,i,j})\)</span>. The log of the rate of goals scored by the home team, <span class="math inline">\(\lambda_{h,i,j}\)</span>, in a game between <span class="math inline">\(\text{tm}_i\)</span> and <span class="math inline">\(\text{tm}_j\)</span> is modeled as the sum of a “baseline” average of goals scored by any given team playing at home, <span class="math inline">\(\text{baseline}_h\)</span>, and the difference between the team “strength” <span class="math inline">\(z\)</span> of teams <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> in a given game. I define the log of the goal rate by the away team, <span class="math inline">\(\lambda_{a,i,j}\)</span>, in a similar fashion. <a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> It is important to distinguish the baseline levels for home and away so as to account for <a href="https://en.wikipedia.org/wiki/Home_advantage">“home field advantage”</a>. (One should expect to find that <span class="math inline">\(\text{baseline}_h &gt; \text{baseline}_a\)</span> in the posterior estimates.)</p>
<p>Since I am employing a Bayesian approach, I need to model priors as well. I define them as follows.</p>
<p><span class="math display">\[
\begin{array}{c}
\text{baseline}_h \sim \mathcal{N}(0, 2^2) \\
\text{baseline}_a \sim \mathcal{N}(0, 2^2) \\
z_{i} \sim \mathcal{N}(z_{\text{all}} , \sigma^2_{\text{all}}) \quad \text{tm}_i &gt; 1 \\
z_{\text{all}} \sim \mathcal{N}(0, 2^2) \\
\sigma_{\text{all}} \sim \mathcal{U}(0, 2).
\end{array}
\]</span></p>
<p>There are a couple of things to note about these priors. First, I must “zero”-anchor the strength estimate <span class="math inline">\(z\)</span> of one team. (This is manifested by <span class="math inline">\(\text{tm}_i &gt; 1\)</span>.) Here, I choose the first team alphabetically—Arsenal. Second, the priors are intentionally defined to be relatively vague (although not too vauge) so as to allow the posterior estimates to be heavily defined by the data rather than the priors. Note that the standard deviation of the overall team strength parameter <span class="math inline">\(z_{\text{all}}\)</span>, defined as <span class="math inline">\(2\)</span> on a log scale, corresponds to an interval of <span class="math inline">\(\left[e^{-2}, e^2\right] = \left[0.13, 7.40\right]\)</span> on an unstransformed scale, i.e.&nbsp;goals scored per game.</p>
<p>I leverage the <a href="https://cran.r-project.org/web/packages/R2OpenBUGS/index.html"><code>{R2OpenBUGs}</code> package</a> to create this model with R on the “frontend” and generate the results using the OpenBUGS engine on the “backend”. Regarding the implementation itself, note that I run 100,000 simulations (<code>n.iter</code>), minus 1,000 “burn-in” runs (<code>n.burn</code>).</p>
<p>The raw results are as follows. (As a quick “validation” of these results, note that <span class="math inline">\(\text{baseline}_h &gt; \text{baseline}_a\)</span>, as hypothesized.)</p>
</section>
<section id="interpretation-discussion" class="level1">
<h1>Interpretation &amp; Discussion</h1>
<p>Next, I correspond the strength estimates <span class="math inline">\(z\)</span> to teams. Notably, I must “re-add” the zero-anchored team—Arsenal (whose <span class="math inline">\(z\)</span> is assigned a dummy value of 1). To do this, I impute its credible set quantiles using the values of the overall strength term <span class="math inline">\(z_{\text{all}}\)</span>.</p>
<p><img src="viz_summ_1_z.png" class="img-fluid"></p>
<p>It’s not surprising to see that the strength (<span class="math inline">\(z\)</span>) corresponding to all but three teams—Liverpool, Man City, and Tottenham—is negative. These three teams, followed closely by Arsenal have been regarded as the best teams for the past two or three EPL seasons. So, relative to Arsenal, all other teams (aside from the top three) are viewed as “worse” by the model.</p>
<p>Note that the <span class="math inline">\(z\)</span> estimates above should not be interpreted as goals scored by the teams because they are relative to the strength of Arsenal. To facilitate such an interpretation, I need to translate <span class="math inline">\(z\)</span> to goals scored per game. To do this, for each <span class="math inline">\(z\)</span>, I (1) subtract the average value of all <span class="math inline">\(z\)</span>’s, (2) add the posterior mean of <span class="math inline">\(\text{baseline}_{h}\)</span>, and (3) exponentiate.</p>
<p>The plot below shows the results of this transformation.</p>
<p><img src="viz_summ_1_z_adj.png" class="img-fluid"></p>
<section id="predictions" class="level2">
<h2 class="anchored" data-anchor-id="predictions">Predictions</h2>
<p>I can make predictions of game results for the historical data, given the model. Specifically, I simulate the score for both teams in each matchup (1,140 in all) 1,000 times, choosing the result inferred by the mode of each side’s simulated score. (For example, if the mode of the 1,000 simulated scores for the away team is 1 and that of the home team is 2, then the predicted outcome is a win for the home team.) A breakdown of the predicted and actual outcomes is shown below.</p>
<p><img src="viz_conf_mat.png" class="img-fluid"></p>
<p>I make a couple of observations:</p>
<ul>
<li>The most common outcome is an actual win by the home team and a predicted win by the home team.</li>
<li>The model never predicts a tie. (This may seem “unreasonable”, but BÃ¥Ã¥th also found this to be true for his final model.)</li>
<li>The model predicts the outcome correctly in 447 + 216 = 663 of 1,140 games (i.e., 58%).</li>
</ul>
<p>The next couple of visuals provide more details regarding the simulated outcomes.</p>
<p><img src="viz_g_mode.png" class="img-fluid"></p>
<p>From the above graph of the mode of goals scored by both sides, it’s apparent that a 2-1 scores in favor of the home side is the most common outcome.</p>
<p><img src="viz_g_mean.png" class="img-fluid"></p>
<p>The above histogram illustrating the mean (instead of the mode) of the simulated goals provides a bit more nuance to our understanding of modes shown before.</p>
<p><img src="viz_result_mode.png" class="img-fluid"></p>
<p>Finally, the above visual shows the predicted outcomes (inferred from the prior graph of predicted modes).</p>
<p>To better understand how the model works on a team-level basis, let’s look at how well it predicts for each team.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Team</th>
<th style="text-align: right;"># of Wins</th>
<th style="text-align: left;">Win %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Arsenal</td>
<td style="text-align: right;">46</td>
<td style="text-align: left;">80.70%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Man City</td>
<td style="text-align: right;">45</td>
<td style="text-align: left;">78.95%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Tottenham</td>
<td style="text-align: right;">43</td>
<td style="text-align: left;">75.44%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Liverpool</td>
<td style="text-align: right;">41</td>
<td style="text-align: left;">71.93%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Chelsea</td>
<td style="text-align: right;">39</td>
<td style="text-align: left;">68.42%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cardiff</td>
<td style="text-align: right;">12</td>
<td style="text-align: left;">63.16%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Everton</td>
<td style="text-align: right;">36</td>
<td style="text-align: left;">63.16%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fulham</td>
<td style="text-align: right;">12</td>
<td style="text-align: left;">63.16%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Man United</td>
<td style="text-align: right;">35</td>
<td style="text-align: left;">61.40%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Huddersfield</td>
<td style="text-align: right;">23</td>
<td style="text-align: left;">60.53%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Burnley</td>
<td style="text-align: right;">34</td>
<td style="text-align: left;">59.65%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Stoke</td>
<td style="text-align: right;">22</td>
<td style="text-align: left;">57.89%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bournemouth</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">52.63%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Crystal Palace</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">52.63%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sunderland</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">52.63%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Swansea</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">52.63%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">West Ham</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">52.63%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Watford</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">50.88%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Newcastle</td>
<td style="text-align: right;">19</td>
<td style="text-align: left;">50.00%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Leicester</td>
<td style="text-align: right;">28</td>
<td style="text-align: left;">49.12%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Middlesbrough</td>
<td style="text-align: right;">9</td>
<td style="text-align: left;">47.37%</td>
</tr>
<tr class="even">
<td style="text-align: left;">West Brom</td>
<td style="text-align: right;">18</td>
<td style="text-align: left;">47.37%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wolves</td>
<td style="text-align: right;">9</td>
<td style="text-align: left;">47.37%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brighton</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">39.47%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Southampton</td>
<td style="text-align: right;">22</td>
<td style="text-align: left;">38.60%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hull</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">31.58%</td>
</tr>
</tbody>
</table>
<p>In most cases, the model predicts the outcome correctly (see <code>is_correct</code>) with greater than 50% accuracy, although there are also teams for which its accuracy is less than 50%.</p>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>In summary, I have created a hierarchical Poisson model to predict scores—and, consequently, game outcomes—for EPL games for the three seasons starting in 2016 and ending in 2018. The model has an training set prediction accuracy of 66.3%. <a href="http://www.sumsar.net/blog/2013/07/modeling-match-results-in-la-liga-part-one/">Baath</a>, whose work inspired mine, achieved an accuracy of 56% with his final model.</p>
<section id="future-work" class="level2">
<h2 class="anchored" data-anchor-id="future-work">Future Work</h2>
<p>My model can certainly be improved. One major flaw of the model is that it does not account for temporal effects, i.e.&nbsp;differences in team strength across seasons. <a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> The consequences of this flaw are compounded by the fact that the pool of teams in each EPL season changes. At the end of each season, the three “worst” EPL teams (by win-loss-tie record) are “relegated” to a secondary league, and, in turn, three secondary league teams are “promoted” to the EPL in their place. <a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> Consequently, one might say that the estimates of the teams that do not appear in all seasons are exaggerated.</p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>This is arguably a “bad” assumption. <a href="http://article.sapub.org/10.5923.s.sports.201401.08.html">Research</a> has shown that goal rate per minute increases in the last 15 minutes of a game.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>This may also be perceived to be a questionable assumption. One may argue that a matchup of “styles”—e.g.&nbsp;an aggressive team against another aggressive team—may distort the results from what would otherwise be expected.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>This approach is arguably too “simplistic”, but it is certainly a valid approach.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>See this <a href="https://www.pinnacle.com/en/betting-articles/Soccer/how-to-calculate-poisson-distribution/MD62MLXUMKMXZ6A8">Pinnacle blog post</a> for a discussion of the topic. (Undoubtedly there are many more articles and papers that explore a similar notion.)<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>There are several notable differences with my work compared to that of BÃ¥Ã¥th: (1) I use the <a href="http://www.openbugs.net/w/FrontPage">OpenBUGS</a> software (and the <a href="https://cran.r-project.org/web/packages/R2OpenBUGS/index.html"><code>{R2OpenBUGS}</code> package</a>) instead of JAGS; (2) I evaluate EPL teams instead of La Liga teams, and over a different time period; (3) I use a “tidy” approach (in terms of packages, plotting, coding style, etc.) instead of a more traditional “base R” approach; (4) I implement a modified version of the second of Baath’s three proposed models (notably, using different priors).<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Baath’s work is licensed under the <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons license</a>, which allows for others to adapt the work of another.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Note that I substitute the baseline home average goal rate with a baseline for away teams, <span class="math inline">\(\text{baseline}_a\)</span>, and I swap the order of the <span class="math inline">\(z_j\)</span> and <span class="math inline">\(z_i\)</span> teams since the relationship is not bi-directional. Also, note that I am careful to distinguish between subscript pair <span class="math inline">\(_h\)</span> and <span class="math inline">\(_a\)</span> for home and away and pair <span class="math inline">\(_i\)</span> and <span class="math inline">\(_j\)</span> for team <span class="math inline">\(i\)</span> and team <span class="math inline">\(j\)</span>. The latter pair is independent of the notion of home or away.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>There are certainly also changes in team strength within seasons, which are even more difficult to model.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>This explains why there are more than 20 teams in thee data set even though there are only 20 teams in the EPL in a given season.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>