---
title: How should we measure manager performance in fantasy football?
description: "All-play scores, optimal lineup choices, and more"
date: 2024-01-02
categories:
  - r
  - football (american)
draft: true
image: latest-all-play-h2h.png
execute: 
  code-fold: false
  eval: false
  include: false
  echo: false
---

## Introduction

If you've played (American) fantasy football, you've probably felt that you have been unlucky and unjustfully lost matches at some point. "I had the second most points of any team in my league this week, and I only lost because I happened to play the team that scored the most points!" So the first thing that we probably do is go to our league standings and look to see how we stack up against the rest of the teams in points for and against. If you've scored the third most points but your current placing is eighth because you've happened to have the most points scored against you, then of course you have grounds to feel slighted.

But are there other ways you can go about justifying your dissatisfaction? Yes, indeed I can think of three:

1.  **All-play record**: What would your position in the league table be if every team played all other teams in head-to-head matchups every week?
2.  **Actual points scored compared to projection**: Are you scoring less than your projected total? Is your team under-performing more than other teams compared to their projected scores?
3.  **Points "left on the bench"**: How many points could you have had if you had started the best possible lineup (with the benefit of hindsight)?

I want to look at how we can calculate these things for the past 5 years of my primary fantasy football league. (Yes, like most sickos, I have multiple league). Comparing counter-factual scores should build up some intuition about all the ways that things can go wrong.

## Analysis and Results

```{r}
#| label: setup
library(readr)
library(dplyr)
library(tidyr)

library(gt)
library(gtExtras)

PROJ_DIR <- 'posts/fantasy-football-performance'
DATA_DIR <- file.path(PROJ_DIR, 'data')
```

The data comes from the past 2018 - 2023 seasons of my primary fantasy football league. We've had different rule sets and schedule formats (i.e. playoffs started in week 14 prior to 2022 in this league), but for the most part, measures of performance should be mostly agnostic to this.

I've anonymized my league mates' names with letters of the alphabet, partly to save readers from viewing oddly-specific jokes, but mostly to focus the analysis on the methods and numbers.

### All-play records

I felt like I was particularly unlucky with my schedule this past year, and indeed this bears out in the numbers.[^1]

[^1]: For those looking to calculate this kind of table for themselves, ["The Fantasy Football Hub"](https://theffhub.com/) has a nice calculator, plus some extra goodies, e.g. "What would my record have been if I had league member X's schedule?".

```{r}
#| label: all-play
anonymize_name <- function(name, id) {
  factor(
    ifelse(id == 7, 'Tony', LETTERS[id]),
    levels = c(LETTERS[1:6], 'Tony', LETTERS[8:10])
  )
}

franchises <- readr::read_csv(file.path(DATA_DIR, 'franchises-all.csv')) |> 
  transmute(
    season,
    franchise_id,
    user_name,
    name = anonymize_name(user_name, franchise_id)
  )

scores <- readr::read_csv(file.path(DATA_DIR, 'team-scores-all.csv')) |> 
  mutate(
    name = anonymize_name(user_name, franchise_id),
    opponent_name = anonymize_name(opponent_user_name, opponent_id)
  )

actual_records <- scores |> 
  dplyr::mutate(
    w = user_score > opponent_score,
    l = user_score < opponent_score
  ) |> 
  dplyr::arrange(season) |> 
  dplyr::group_by(season, name) |> 
  dplyr::summarize(
    dplyr::across(
      c(w, l),
      sum
    )
  ) |> 
  dplyr::ungroup()

all_play_records <- tidyr::crossing(
  scores |> dplyr::distinct(season, week),
  name = franchises$name,
  opponent_name = franchises$name
) |> 
  dplyr::filter(name != opponent_name) |> 
  dplyr::inner_join(
    scores |>
      dplyr::select(season, week, name, user_score),
    by = dplyr::join_by(season, week, name)
  ) |>
  dplyr::inner_join(
    scores |> 
      dplyr::select(
        season,
        week,
        opponent_name = name,
        opponent_score = user_score
      ),
    by = dplyr::join_by(season, week, opponent_name)
  ) |> 
  dplyr::mutate(
    w = user_score > opponent_score,
    l = user_score < opponent_score
  ) |> 
  dplyr::group_by(season, name) |> 
  dplyr::summarize(
    dplyr::across(
      c(w, l),
      sum
    )
  ) |> 
  dplyr::ungroup() |> 
  dplyr::arrange(season, dplyr::desc(w))

compared_all_play_records <- all_play_records |> 
  dplyr::transmute(
    season,
    name,
    all_play_season = season,
    all_play_w = w,
    all_play_l = l,
    all_play_w_prop = w / (w + l)
  ) |> 
  dplyr::inner_join(
    actual_records |> 
      dplyr::transmute(
        season,
        name,
        actual_w = w,
        actual_l = l,
        actual_w_prop = w / (w + l)
      ),
    by = dplyr::join_by(season, name),
    relationship = 'many-to-many'
  ) |> 
  dplyr::mutate(
    w_prop_d = actual_w_prop - all_play_w_prop
  ) |> 
  dplyr::arrange(w_prop_d)

.zero_centered_hulk_pal <- function(x) {
  hex_neg = RColorBrewer::brewer.pal(7, 'PRGn')[1:3]
  hex_pos = RColorBrewer::brewer.pal(7, 'PRGn')[5:7]
  hex_mid = '#F7F7F7'
  rng <- range(x, na.rm = TRUE)
  mi <- rng[1]
  ma <- rng[2]
  f_neg <- scales::col_numeric(
    palette = c(hex_neg, hex_mid),
    domain = c(mi, 0)
  )
  f_pos <- scales::col_numeric(
    palette = c(hex_mid, hex_pos),
    domain = c(0, ma)
  )
  suppressWarnings(
    ifelse(x < 0, f_neg(x), f_pos(x))
  )
}

.gt_zerocentered_hulk_col_numeric <- function(gt_object, columns = NULL) {
  
  gt::data_color(
    gt_object,
    columns = {{ columns }},
    fn = .zero_centered_hulk_pal,
    alpha = 0.9
  )
}

latest_all_play_h2h_gt <- compared_all_play_records |> 
  dplyr::filter(season == max(season)) |> 
  dplyr::arrange(w_prop_d) |> 
  dplyr::select(
    name,
    actual_w,
    actual_l,
    all_play_w,
    all_play_l,
    actual_w_prop,
    all_play_w_prop,
    w_prop_d
  ) |> 
  gt::gt() |> 
  gt::cols_label(
    name ~ 'Player',
    actual_w ~ 'W',
    actual_l ~ 'L',
    all_play_w ~ 'W',
    all_play_l ~ 'L',
    actual_w_prop ~ 'Actual',
    all_play_w_prop ~ 'All Play',
    w_prop_d ~ gt::md('**Δ**')
  ) |> 
  gtExtras::gt_theme_538() |> 
  gt::tab_spanner(
    columns = c(actual_w, actual_l),
    label = 'Actual'
  ) |> 
  gt::tab_spanner(
    columns = c(all_play_w, all_play_l),
    label = 'All Play'
  ) |> 
  gt::cols_align(
    columns = name,
    align = 'left'
  ) |> 
  gt::tab_spanner(
    columns = c(actual_w_prop, all_play_w_prop),
    label = 'Win %'
  ) |> 
  # gtExtras::gt_hulk_col_numeric(
  .gt_zerocentered_hulk_col_numeric(
    columns = w_prop_d
  ) |> 
  gt::fmt_percent(
    columns = dplyr::matches('_prop'),
    decimals = 0
  ) |> 
  gt::tab_header(
    title = gt::md('2023 All Play records'),
    subtitle = 'Tony was the most unlucky in the league this season.'
  ) |> 
  gt::tab_footnote(
    footnote = "Data from Tony's personal league."
  )

gtExtras::gtsave_extra(
  latest_all_play_h2h_gt,
  filename = file.path(PROJ_DIR, 'latest-all-play-h2h.png')
)

## Reference: https://stackoverflow.com/questions/74349523/avoid-quarto-table-style-in-table-that-contains-images
make_tbl_quarto_robust <- function(tbl) {
  # Get tbl html code (without the inline stuff)
  tbl_html <- tbl |>
    gt::as_raw_html(inline_css = FALSE) 
  
  # Find table id
  tbl_id <-  stringr::str_match(tbl_html, 'id="(.*)"\\s')[,2] 
  
  # Split html so that we only replace strings in the css part at first
  # That's important for performance
  split_html <- tbl_html |> 
    stringr::str_split_1('<table class="gt_table".{0,}>')
  css_part <- split_html[1] |> 
    stringr::str_split_1('<style>')
  
  # Create regex to add table id
  my_regex <- stringr::str_c('(', tbl_id, ' )?(.* \\{)')
  replaced_css <- css_part[2] |>
    # Make global html changes more specific
    stringr::str_replace_all('html \\{', str_c(tbl_id, ' .gt_table {')) |> 
    # Make changes to everything specific to the table id
    stringr::str_replace_all(my_regex, str_c('\\#', tbl_id, ' \\2')) |> 
    # Replace duplicate names 
    stringr::str_replace_all(
      str_c('\\#', tbl_id, ' \\#', tbl_id),
      str_c('\\#', tbl_id)
    )
  
  # Put split html back together
  stringr::str_c(
    css_part[1], '<style>', 
    replaced_css, '<table class="gt_table">', 
    split_html[2]
  ) |> 
    # Rename all gt_* classes to new_gt_*
    stringr::str_replace_all('(\\.|class="| )gt', '\\1new_gt') |> 
    # Reformat as html
    gt::html()
}

make_tbl_quarto_robust(latest_all_play_h2h_gt) |> clipr::write_clip()
```

```{=html}
<div id="ozhntgtebo" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
  <style>@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Cairo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
#ozhntgtebo table {
  font-family: Cairo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ozhntgtebo thead, #ozhntgtebo tbody, #ozhntgtebo tfoot, #ozhntgtebo tr, #ozhntgtebo td, #ozhntgtebo th {
  border-style: none;
}

#ozhntgtebo p {
  margin: 0;
  padding: 0;
}

#ozhntgtebo .new_gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: 400;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: none;
  border-top-width: 3px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ozhntgtebo .new_gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ozhntgtebo .new_gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ozhntgtebo .new_gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ozhntgtebo .new_gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ozhntgtebo .new_gt_bottom_border {
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ozhntgtebo .new_gt_col_headings {
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ozhntgtebo .new_gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ozhntgtebo .new_gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ozhntgtebo .new_gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ozhntgtebo .new_gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ozhntgtebo .new_gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ozhntgtebo .new_gt_spanner_row {
  border-bottom-style: hidden;
}

#ozhntgtebo .new_gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ozhntgtebo .new_gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  vertical-align: middle;
}

#ozhntgtebo .new_gt_from_md > :first-child {
  margin-top: 0;
}

#ozhntgtebo .new_gt_from_md > :last-child {
  margin-bottom: 0;
}

#ozhntgtebo .new_gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ozhntgtebo .new_gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #FFFFFF;
  padding-left: 5px;
  padding-right: 5px;
}

#ozhntgtebo .new_gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ozhntgtebo .new_gt_row_group_first td {
  border-top-width: 2px;
}

#ozhntgtebo .new_gt_row_group_first th {
  border-top-width: 2px;
}

#ozhntgtebo .new_gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ozhntgtebo .new_gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ozhntgtebo .new_gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ozhntgtebo .new_gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ozhntgtebo .new_gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ozhntgtebo .new_gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ozhntgtebo .new_gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ozhntgtebo .new_gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ozhntgtebo .new_gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ozhntgtebo .new_gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ozhntgtebo .new_gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ozhntgtebo .new_gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ozhntgtebo .new_gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ozhntgtebo .new_gt_left {
  text-align: left;
}

#ozhntgtebo .new_gt_center {
  text-align: center;
}

#ozhntgtebo .new_gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ozhntgtebo .new_gt_font_normal {
  font-weight: normal;
}

#ozhntgtebo .new_gt_font_bold {
  font-weight: bold;
}

#ozhntgtebo .new_gt_font_italic {
  font-style: italic;
}

#ozhntgtebo .new_gt_super {
  font-size: 65%;
}

#ozhntgtebo .new_gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ozhntgtebo .new_gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ozhntgtebo .new_gt_indent_1 {
  text-indent: 5px;
}

#ozhntgtebo .new_gt_indent_2 {
  text-indent: 10px;
}

#ozhntgtebo .new_gt_indent_3 {
  text-indent: 15px;
}

#ozhntgtebo .new_gt_indent_4 {
  text-indent: 20px;
}

#ozhntgtebo .new_gt_indent_5 {
  text-indent: 25px;
}

#ozhntgtebo tbody tr:last-child {
  border-bottom: 2px solid #ffffff00;
}
</style>
  <table class="new_gt_table">
<thead>
<tr class="new_gt_heading">
<td colspan="8" class="new_gt_heading new_gt_title new_gt_font_normal" style="font-family: Chivo; font-weight: 700;">2023 All Play records</td>
</tr>
<tr class="new_gt_heading">
<td colspan="8" class="new_gt_heading new_gt_subtitle new_gt_font_normal new_gt_bottom_border" style="font-family: Chivo; font-weight: 300;">Tony was the most unlucky in the league this season.</td>
</tr>
<tr class="new_gt_col_headings new_gt_spanner_row">
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_left" rowspan="2" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="Player">Player</th>
<th class="new_gt_center new_gt_columns_top_border new_gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Actual">
<span class="new_gt_column_spanner">Actual</span>
</th>
<th class="new_gt_center new_gt_columns_top_border new_gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="All Play">
<span class="new_gt_column_spanner">All Play</span>
</th>
<th class="new_gt_center new_gt_columns_top_border new_gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Win %">
<span class="new_gt_column_spanner">Win %</span>
</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="2" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="&lt;strong&gt;Δ&lt;/strong&gt;"><strong>Δ</strong></th>
</tr>
<tr class="new_gt_col_headings">
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="W">W</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="L">L</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="W">W</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="L">L</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="Actual">Actual</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="All Play">All Play</th>
</tr>
</thead>
<tbody class="new_gt_table_body">
<tr><td headers="name" class="new_gt_row new_gt_left">Tony</td>
<td headers="actual_w" class="new_gt_row new_gt_right">4</td>
<td headers="actual_l" class="new_gt_row new_gt_right">11</td>
<td headers="all_play_w" class="new_gt_row new_gt_right">60</td>
<td headers="all_play_l" class="new_gt_row new_gt_right">75</td>
<td headers="actual_w_prop" class="new_gt_row new_gt_right">27%</td>
<td headers="all_play_w_prop" class="new_gt_row new_gt_right">44%</td>
<td headers="w_prop_d" class="new_gt_row new_gt_right" style="background-color: rgba(118,42,131,0.9); color: #FFFFFF;">−18%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">A</td>
<td headers="actual_w" class="new_gt_row new_gt_right">6</td>
<td headers="actual_l" class="new_gt_row new_gt_right">9</td>
<td headers="all_play_w" class="new_gt_row new_gt_right">75</td>
<td headers="all_play_l" class="new_gt_row new_gt_right">60</td>
<td headers="actual_w_prop" class="new_gt_row new_gt_right">40%</td>
<td headers="all_play_w_prop" class="new_gt_row new_gt_right">56%</td>
<td headers="w_prop_d" class="new_gt_row new_gt_right" style="background-color: rgba(140,81,155,0.9); color: #FFFFFF;">−16%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">F</td>
<td headers="actual_w" class="new_gt_row new_gt_right">5</td>
<td headers="actual_l" class="new_gt_row new_gt_right">10</td>
<td headers="all_play_w" class="new_gt_row new_gt_right">60</td>
<td headers="all_play_l" class="new_gt_row new_gt_right">75</td>
<td headers="actual_w_prop" class="new_gt_row new_gt_right">33%</td>
<td headers="all_play_w_prop" class="new_gt_row new_gt_right">44%</td>
<td headers="w_prop_d" class="new_gt_row new_gt_right" style="background-color: rgba(182,150,200,0.9); color: #FFFFFF;">−11%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">I</td>
<td headers="actual_w" class="new_gt_row new_gt_right">7</td>
<td headers="actual_l" class="new_gt_row new_gt_right">8</td>
<td headers="all_play_w" class="new_gt_row new_gt_right">67</td>
<td headers="all_play_l" class="new_gt_row new_gt_right">68</td>
<td headers="actual_w_prop" class="new_gt_row new_gt_right">47%</td>
<td headers="all_play_w_prop" class="new_gt_row new_gt_right">50%</td>
<td headers="w_prop_d" class="new_gt_row new_gt_right" style="background-color: rgba(239,229,240,0.9); color: #000000;">−3%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">E</td>
<td headers="actual_w" class="new_gt_row new_gt_right">9</td>
<td headers="actual_l" class="new_gt_row new_gt_right">6</td>
<td headers="all_play_w" class="new_gt_row new_gt_right">80</td>
<td headers="all_play_l" class="new_gt_row new_gt_right">55</td>
<td headers="actual_w_prop" class="new_gt_row new_gt_right">60%</td>
<td headers="all_play_w_prop" class="new_gt_row new_gt_right">59%</td>
<td headers="w_prop_d" class="new_gt_row new_gt_right" style="background-color: rgba(244,246,244,0.9); color: #000000;">1%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">H</td>
<td headers="actual_w" class="new_gt_row new_gt_right">8</td>
<td headers="actual_l" class="new_gt_row new_gt_right">7</td>
<td headers="all_play_w" class="new_gt_row new_gt_right">69</td>
<td headers="all_play_l" class="new_gt_row new_gt_right">66</td>
<td headers="actual_w_prop" class="new_gt_row new_gt_right">53%</td>
<td headers="all_play_w_prop" class="new_gt_row new_gt_right">51%</td>
<td headers="w_prop_d" class="new_gt_row new_gt_right" style="background-color: rgba(239,245,237,0.9); color: #000000;">2%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">C</td>
<td headers="actual_w" class="new_gt_row new_gt_right">10</td>
<td headers="actual_l" class="new_gt_row new_gt_right">5</td>
<td headers="all_play_w" class="new_gt_row new_gt_right">85</td>
<td headers="all_play_l" class="new_gt_row new_gt_right">50</td>
<td headers="actual_w_prop" class="new_gt_row new_gt_right">67%</td>
<td headers="all_play_w_prop" class="new_gt_row new_gt_right">63%</td>
<td headers="w_prop_d" class="new_gt_row new_gt_right" style="background-color: rgba(233,244,231,0.9); color: #000000;">4%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">J</td>
<td headers="actual_w" class="new_gt_row new_gt_right">7</td>
<td headers="actual_l" class="new_gt_row new_gt_right">8</td>
<td headers="all_play_w" class="new_gt_row new_gt_right">55</td>
<td headers="all_play_l" class="new_gt_row new_gt_right">80</td>
<td headers="actual_w_prop" class="new_gt_row new_gt_right">47%</td>
<td headers="all_play_w_prop" class="new_gt_row new_gt_right">41%</td>
<td headers="w_prop_d" class="new_gt_row new_gt_right" style="background-color: rgba(225,242,221,0.9); color: #000000;">6%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">D</td>
<td headers="actual_w" class="new_gt_row new_gt_right">8</td>
<td headers="actual_l" class="new_gt_row new_gt_right">7</td>
<td headers="all_play_w" class="new_gt_row new_gt_right">58</td>
<td headers="all_play_l" class="new_gt_row new_gt_right">77</td>
<td headers="actual_w_prop" class="new_gt_row new_gt_right">53%</td>
<td headers="all_play_w_prop" class="new_gt_row new_gt_right">43%</td>
<td headers="w_prop_d" class="new_gt_row new_gt_right" style="background-color: rgba(193,227,186,0.9); color: #000000;">10%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">B</td>
<td headers="actual_w" class="new_gt_row new_gt_right">11</td>
<td headers="actual_l" class="new_gt_row new_gt_right">4</td>
<td headers="all_play_w" class="new_gt_row new_gt_right">66</td>
<td headers="all_play_l" class="new_gt_row new_gt_right">69</td>
<td headers="actual_w_prop" class="new_gt_row new_gt_right">73%</td>
<td headers="all_play_w_prop" class="new_gt_row new_gt_right">49%</td>
<td headers="w_prop_d" class="new_gt_row new_gt_right" style="background-color: rgba(27,120,55,0.9); color: #FFFFFF;">24%</td></tr>
</tbody>

<tfoot class="new_gt_footnotes">
<tr>
<td class="new_gt_footnote" colspan="8"> Data from Tony's personal league.</td>
</tr>
</tfoot>
</table>
</div>
```
An 18% difference between my actual record and my all play record feels non-trivial. In fact, in comparing that level of under-performance to the prior seasons, I find that there were only 3 less fortunate outcomes-- -26% for team A in 2021, -23% for team E in 2019, and -21% for myself in 2020!

```{r}
#| label: all-play-all
#| include: false
total_all_play_h2h_gt <- compared_all_play_records |> 
  dplyr::transmute(
    name,
    season = as.character(season),
    w_prop_d
  ) |> 
  dplyr::bind_rows(
    compared_all_play_records |> 
      dplyr::group_by(name) |> 
      dplyr::summarize(
        dplyr::across(
          dplyr::matches('_(w|l)$'),
          sum
        )
      ) |> 
      dplyr::ungroup() |> 
      dplyr::transmute(
        name,
        season = 'Total',
        w_prop_d = (actual_w / (actual_w + actual_l)) - (all_play_w / (all_play_w + all_play_l))
      )
  ) |> 
  tidyr::pivot_wider(
    names_from = season,
    values_from = w_prop_d,
    names_sort = TRUE
  ) |> 
  dplyr::arrange(Total) |> 
  gt::gt() |> 
  gt::cols_label(
    name ~ 'Player'
  ) |> 
  gtExtras::gt_theme_538() |> 
  gt::cols_align(
    columns = name,
    align = 'left'
  ) |> 
  gt::fmt_percent(
    columns = -c(name),
    decimals = 0
  ) |> 
  .gt_zerocentered_hulk_col_numeric(
    columns = -c(name)
  ) |> 
  gt::tab_header(
    title = gt::md('Actual Win % - All Play Win %'),
    subtitle = 'Tony has been the second unluckiest since 2018.'
  ) |> 
  gt::tab_footnote(
    footnote = "Data from Tony's personal league."
  )

gt::gtsave(
  total_all_play_h2h_gt,
  filename = file.path(PROJ_DIR, 'total-all-play-h2h.png')
)

make_tbl_quarto_robust(total_all_play_h2h_gt) |> clipr::write_clip()
```

```{=html}
<div id="mjkvatitfk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
  <style>@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Cairo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
#mjkvatitfk table {
  font-family: Cairo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mjkvatitfk thead, #mjkvatitfk tbody, #mjkvatitfk tfoot, #mjkvatitfk tr, #mjkvatitfk td, #mjkvatitfk th {
  border-style: none;
}

#mjkvatitfk p {
  margin: 0;
  padding: 0;
}

#mjkvatitfk .new_gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: 400;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: none;
  border-top-width: 3px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mjkvatitfk .new_gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mjkvatitfk .new_gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mjkvatitfk .new_gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mjkvatitfk .new_gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mjkvatitfk .new_gt_bottom_border {
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mjkvatitfk .new_gt_col_headings {
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mjkvatitfk .new_gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mjkvatitfk .new_gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mjkvatitfk .new_gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mjkvatitfk .new_gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mjkvatitfk .new_gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mjkvatitfk .new_gt_spanner_row {
  border-bottom-style: hidden;
}

#mjkvatitfk .new_gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mjkvatitfk .new_gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  vertical-align: middle;
}

#mjkvatitfk .new_gt_from_md > :first-child {
  margin-top: 0;
}

#mjkvatitfk .new_gt_from_md > :last-child {
  margin-bottom: 0;
}

#mjkvatitfk .new_gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mjkvatitfk .new_gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #FFFFFF;
  padding-left: 5px;
  padding-right: 5px;
}

#mjkvatitfk .new_gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mjkvatitfk .new_gt_row_group_first td {
  border-top-width: 2px;
}

#mjkvatitfk .new_gt_row_group_first th {
  border-top-width: 2px;
}

#mjkvatitfk .new_gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjkvatitfk .new_gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mjkvatitfk .new_gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mjkvatitfk .new_gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mjkvatitfk .new_gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjkvatitfk .new_gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mjkvatitfk .new_gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mjkvatitfk .new_gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mjkvatitfk .new_gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mjkvatitfk .new_gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mjkvatitfk .new_gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjkvatitfk .new_gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mjkvatitfk .new_gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjkvatitfk .new_gt_left {
  text-align: left;
}

#mjkvatitfk .new_gt_center {
  text-align: center;
}

#mjkvatitfk .new_gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mjkvatitfk .new_gt_font_normal {
  font-weight: normal;
}

#mjkvatitfk .new_gt_font_bold {
  font-weight: bold;
}

#mjkvatitfk .new_gt_font_italic {
  font-style: italic;
}

#mjkvatitfk .new_gt_super {
  font-size: 65%;
}

#mjkvatitfk .new_gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mjkvatitfk .new_gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mjkvatitfk .new_gt_indent_1 {
  text-indent: 5px;
}

#mjkvatitfk .new_gt_indent_2 {
  text-indent: 10px;
}

#mjkvatitfk .new_gt_indent_3 {
  text-indent: 15px;
}

#mjkvatitfk .new_gt_indent_4 {
  text-indent: 20px;
}

#mjkvatitfk .new_gt_indent_5 {
  text-indent: 25px;
}

#mjkvatitfk tbody tr:last-child {
  border-bottom: 2px solid #ffffff00;
}
</style>
  <table class="new_gt_table">
<thead>
<tr class="new_gt_heading">
<td colspan="8" class="new_gt_heading new_gt_title new_gt_font_normal" style="font-family: Chivo; font-weight: 700;">Actual Win % - All Play Win %</td>
</tr>
<tr class="new_gt_heading">
<td colspan="8" class="new_gt_heading new_gt_subtitle new_gt_font_normal new_gt_bottom_border" style="font-family: Chivo; font-weight: 300;">Tony has been the second unluckiest since 2018.</td>
</tr>
<tr class="new_gt_col_headings">
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="Player">Player</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="2018">2018</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="2019">2019</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="2020">2020</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="2021">2021</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="2022">2022</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="2023">2023</th>
<th class="new_gt_col_heading new_gt_columns_bottom_border new_gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;" scope="col" id="Total">Total</th>
</tr>
</thead>
<tbody class="new_gt_table_body">
<tr><td headers="name" class="new_gt_row new_gt_left">A</td>
<td headers="2018" class="new_gt_row new_gt_right" style="background-color: rgba(118,42,131,0.9); color: #FFFFFF;">−16%</td>
<td headers="2019" class="new_gt_row new_gt_right" style="background-color: rgba(183,221,177,0.9); color: #000000;">10%</td>
<td headers="2020" class="new_gt_row new_gt_right" style="background-color: rgba(225,242,220,0.9); color: #000000;">3%</td>
<td headers="2021" class="new_gt_row new_gt_right" style="background-color: rgba(118,42,131,0.9); color: #FFFFFF;">−26%</td>
<td headers="2022" class="new_gt_row new_gt_right" style="background-color: rgba(225,242,220,0.9); color: #000000;">5%</td>
<td headers="2023" class="new_gt_row new_gt_right" style="background-color: rgba(140,81,155,0.9); color: #FFFFFF;">−16%</td>
<td headers="Total" class="new_gt_row new_gt_right" style="background-color: rgba(118,42,131,0.9); color: #FFFFFF;">−7%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">Tony</td>
<td headers="2018" class="new_gt_row new_gt_right" style="background-color: rgba(245,242,245,0.9); color: #000000;">−1%</td>
<td headers="2019" class="new_gt_row new_gt_right" style="background-color: rgba(162,210,156,0.9); color: #000000;">11%</td>
<td headers="2020" class="new_gt_row new_gt_right" style="background-color: rgba(118,42,131,0.9); color: #FFFFFF;">−21%</td>
<td headers="2021" class="new_gt_row new_gt_right" style="background-color: rgba(234,219,235,0.9); color: #000000;">−7%</td>
<td headers="2022" class="new_gt_row new_gt_right" style="background-color: rgba(244,246,243,0.9); color: #000000;">1%</td>
<td headers="2023" class="new_gt_row new_gt_right" style="background-color: rgba(118,42,131,0.9); color: #FFFFFF;">−18%</td>
<td headers="Total" class="new_gt_row new_gt_right" style="background-color: rgba(149,96,165,0.9); color: #FFFFFF;">−6%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">I</td>
<td headers="2018" class="new_gt_row new_gt_right" style="background-color: rgba(247,247,247,0.9); color: #000000;">0%</td>
<td headers="2019" class="new_gt_row new_gt_right" style="background-color: rgba(212,187,219,0.9); color: #000000;">−10%</td>
<td headers="2020" class="new_gt_row new_gt_right" style="background-color: rgba(189,225,183,0.9); color: #000000;">6%</td>
<td headers="2021" class="new_gt_row new_gt_right" style="background-color: rgba(237,224,237,0.9); color: #000000;">−6%</td>
<td headers="2022" class="new_gt_row new_gt_right" style="background-color: rgba(241,246,239,0.9); color: #000000;">1%</td>
<td headers="2023" class="new_gt_row new_gt_right" style="background-color: rgba(239,229,240,0.9); color: #000000;">−3%</td>
<td headers="Total" class="new_gt_row new_gt_right" style="background-color: rgba(234,218,234,0.9); color: #000000;">−2%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">C</td>
<td headers="2018" class="new_gt_row new_gt_right" style="background-color: rgba(94,165,98,0.9); color: #FFFFFF;">9%</td>
<td headers="2019" class="new_gt_row new_gt_right" style="background-color: rgba(194,165,208,0.9); color: #000000;">−13%</td>
<td headers="2020" class="new_gt_row new_gt_right" style="background-color: rgba(169,130,188,0.9); color: #FFFFFF;">−15%</td>
<td headers="2021" class="new_gt_row new_gt_right" style="background-color: rgba(243,246,242,0.9); color: #000000;">1%</td>
<td headers="2022" class="new_gt_row new_gt_right" style="background-color: rgba(221,241,216,0.9); color: #000000;">6%</td>
<td headers="2023" class="new_gt_row new_gt_right" style="background-color: rgba(233,244,231,0.9); color: #000000;">4%</td>
<td headers="Total" class="new_gt_row new_gt_right" style="background-color: rgba(239,229,239,0.9); color: #000000;">−1%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">B</td>
<td headers="2018" class="new_gt_row new_gt_right" style="background-color: rgba(240,231,240,0.9); color: #000000;">−2%</td>
<td headers="2019" class="new_gt_row new_gt_right" style="background-color: rgba(237,225,238,0.9); color: #000000;">−5%</td>
<td headers="2020" class="new_gt_row new_gt_right" style="background-color: rgba(236,224,237,0.9); color: #000000;">−5%</td>
<td headers="2021" class="new_gt_row new_gt_right" style="background-color: rgba(237,224,237,0.9); color: #000000;">−6%</td>
<td headers="2022" class="new_gt_row new_gt_right" style="background-color: rgba(165,124,183,0.9); color: #FFFFFF;">−11%</td>
<td headers="2023" class="new_gt_row new_gt_right" style="background-color: rgba(27,120,55,0.9); color: #FFFFFF;">24%</td>
<td headers="Total" class="new_gt_row new_gt_right" style="background-color: rgba(242,236,242,0.9); color: #000000;">−1%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">F</td>
<td headers="2018" class="new_gt_row new_gt_right" style="background-color: rgba(221,241,216,0.9); color: #000000;">3%</td>
<td headers="2019" class="new_gt_row new_gt_right" style="background-color: rgba(223,241,218,0.9); color: #000000;">6%</td>
<td headers="2020" class="new_gt_row new_gt_right" style="background-color: rgba(230,243,227,0.9); color: #000000;">2%</td>
<td headers="2021" class="new_gt_row new_gt_right" style="background-color: rgba(172,216,166,0.9); color: #000000;">8%</td>
<td headers="2022" class="new_gt_row new_gt_right" style="background-color: rgba(245,242,245,0.9); color: #000000;">−1%</td>
<td headers="2023" class="new_gt_row new_gt_right" style="background-color: rgba(182,150,200,0.9); color: #FFFFFF;">−11%</td>
<td headers="Total" class="new_gt_row new_gt_right" style="background-color: rgba(235,244,233,0.9); color: #000000;">1%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">J</td>
<td headers="2018" class="new_gt_row new_gt_right" style="background-color: rgba(178,144,197,0.9); color: #FFFFFF;">−10%</td>
<td headers="2019" class="new_gt_row new_gt_right" style="background-color: rgba(27,120,55,0.9); color: #FFFFFF;">21%</td>
<td headers="2020" class="new_gt_row new_gt_right" style="background-color: rgba(225,242,220,0.9); color: #000000;">3%</td>
<td headers="2021" class="new_gt_row new_gt_right" style="background-color: rgba(218,240,213,0.9); color: #000000;">5%</td>
<td headers="2022" class="new_gt_row new_gt_right" style="background-color: rgba(126,57,140,0.9); color: #FFFFFF;">−15%</td>
<td headers="2023" class="new_gt_row new_gt_right" style="background-color: rgba(225,242,221,0.9); color: #000000;">6%</td>
<td headers="Total" class="new_gt_row new_gt_right" style="background-color: rgba(233,244,230,0.9); color: #000000;">1%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">D</td>
<td headers="2018" class="new_gt_row new_gt_right" style="background-color: rgba(134,195,129,0.9); color: #000000;">7%</td>
<td headers="2019" class="new_gt_row new_gt_right" style="background-color: rgba(232,214,233,0.9); color: #000000;">−7%</td>
<td headers="2020" class="new_gt_row new_gt_right" style="background-color: rgba(27,120,55,0.9); color: #FFFFFF;">13%</td>
<td headers="2021" class="new_gt_row new_gt_right" style="background-color: rgba(185,222,178,0.9); color: #000000;">7%</td>
<td headers="2022" class="new_gt_row new_gt_right" style="background-color: rgba(118,42,131,0.9); color: #FFFFFF;">−15%</td>
<td headers="2023" class="new_gt_row new_gt_right" style="background-color: rgba(193,227,186,0.9); color: #000000;">10%</td>
<td headers="Total" class="new_gt_row new_gt_right" style="background-color: rgba(221,241,216,0.9); color: #000000;">2%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">E</td>
<td headers="2018" class="new_gt_row new_gt_right" style="background-color: rgba(27,120,55,0.9); color: #FFFFFF;">11%</td>
<td headers="2019" class="new_gt_row new_gt_right" style="background-color: rgba(118,42,131,0.9); color: #FFFFFF;">−23%</td>
<td headers="2020" class="new_gt_row new_gt_right" style="background-color: rgba(50,133,67,0.9); color: #FFFFFF;">12%</td>
<td headers="2021" class="new_gt_row new_gt_right" style="background-color: rgba(160,209,154,0.9); color: #000000;">8%</td>
<td headers="2022" class="new_gt_row new_gt_right" style="background-color: rgba(172,216,166,0.9); color: #000000;">10%</td>
<td headers="2023" class="new_gt_row new_gt_right" style="background-color: rgba(244,246,244,0.9); color: #000000;">1%</td>
<td headers="Total" class="new_gt_row new_gt_right" style="background-color: rgba(201,231,195,0.9); color: #000000;">3%</td></tr>
<tr><td headers="name" class="new_gt_row new_gt_left">H</td>
<td headers="2018" class="new_gt_row new_gt_right" style="background-color: rgba(245,242,245,0.9); color: #000000;">−1%</td>
<td headers="2019" class="new_gt_row new_gt_right" style="background-color: rgba(162,210,156,0.9); color: #000000;">11%</td>
<td headers="2020" class="new_gt_row new_gt_right" style="background-color: rgba(230,243,227,0.9); color: #000000;">2%</td>
<td headers="2021" class="new_gt_row new_gt_right" style="background-color: rgba(27,120,55,0.9); color: #FFFFFF;">15%</td>
<td headers="2022" class="new_gt_row new_gt_right" style="background-color: rgba(27,120,55,0.9); color: #FFFFFF;">19%</td>
<td headers="2023" class="new_gt_row new_gt_right" style="background-color: rgba(239,245,237,0.9); color: #000000;">2%</td>
<td headers="Total" class="new_gt_row new_gt_right" style="background-color: rgba(27,120,55,0.9); color: #FFFFFF;">9%</td></tr>
</tbody>

<tfoot class="new_gt_footnotes">
<tr>
<td class="new_gt_footnote" colspan="8"> Data from Tony's personal league.</td>
</tr>
</tfoot>
</table>
</div>
```
Teams E and H have been fairly fortunate, only facing one season in the past 6 where they ended up with a record that was worse than their all play record.

```{r}
#| label: all-play-quantiles
round(quantile(compared_all_play_records$w_prop_d, c(0.975, 0.025)), 3)
```

The top and bottom 2.5th percentiles of season-long actual win % minus all play win % are about +20% and -22% respectively. This translates to about ±3 wins (depending on how many games your league plays). So, the "back-of-the-napkin" take-away here is that you could be winning or losing 3 more games due to your schedule, in the most extreme cases.

Overall, it's interesting to see that the under- and over-performance doesn't quite level out even over the course of 6 seasons. (How has Team H consistently gotten favorable schedules?!) Surely we'd see this even out over more and more seasons, but it's noteworthy that even 6 seasons may not be sufficient to achieve long-run schedule fairness.

### Actual vs. projected points

```{r}

```

### Lost Opportunity

## Conclusion

Of course, a lot of things are out of one's control--i.e. you generally don't have any influence on your opponent's score in a given week--but our look into lost opportunity is something that could serve as an impetus for action. Knowing that, on average, players in my leagues lose out on about \~20 points every week due to sub-optimal lineup choices can make me reconsider how I think about "upside" with bench players.
